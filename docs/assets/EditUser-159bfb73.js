import{m as K,r as o,l as S,aD as M,e as w,ag as F,ah as H,aE as T,M as E,aF as W,aG as U,aH as N,u as V,aI as A,v as q,x as G,K as X,d as j,aj as Y,j as p,L as I}from"./index-785dc145.js";import{d as J}from"./user-87dfc3d3.js";import Q from"./AddPos-060f4348.js";import{T as _}from"./Table-05b3190b.js";import{D as Z}from"./DeleteOutlined-8131917b.js";import"./menu-05045571.js";import"./index-f9aec56d.js";import"./index-fdd898fc.js";const ee=e=>{const{componentCls:n,iconCls:r,zIndexPopup:t,colorText:a,colorWarning:c,marginXS:s,fontSize:l,fontWeightStrong:u,lineHeight:g}=e;return{[n]:{zIndex:t,[`${n}-inner-content`]:{color:a},[`${n}-message`]:{position:"relative",marginBottom:s,color:a,fontSize:l,display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${n}-message-icon ${r}`]:{color:c,fontSize:l,flex:"none",lineHeight:1,paddingTop:(Math.round(l*g)-l)/2},"&-title":{flex:"auto",marginInlineStart:s},"&-title-only":{fontWeight:u}},[`${n}-description`]:{position:"relative",marginInlineStart:l+s,marginBottom:s,color:a,fontSize:l},[`${n}-buttons`]:{textAlign:"end",button:{marginInlineStart:s}}}}},$=K("Popconfirm",e=>ee(e),e=>{const{zIndexPopupBase:n}=e;return{zIndexPopup:n+60}});var te=globalThis&&globalThis.__rest||function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(e);a<t.length;a++)n.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(e,t[a])&&(r[t[a]]=e[t[a]]);return r};const k=e=>{const{prefixCls:n,okButtonProps:r,cancelButtonProps:t,title:a,description:c,cancelText:s,okText:l,okType:u="primary",icon:g=o.createElement(N,null),showCancel:b=!0,close:x,onConfirm:h,onCancel:m}=e,{getPrefixCls:f}=o.useContext(S),[y]=F("Popconfirm",H.Popconfirm);return o.createElement("div",{className:`${n}-inner-content`},o.createElement("div",{className:`${n}-message`},g&&o.createElement("span",{className:`${n}-message-icon`},g),o.createElement("div",{className:w(`${n}-message-title`,{[`${n}-message-title-only`]:!!c})},T(a))),c&&o.createElement("div",{className:`${n}-description`},T(c)),o.createElement("div",{className:`${n}-buttons`},b&&o.createElement(E,Object.assign({onClick:m,size:"small"},t),s??(y==null?void 0:y.cancelText)),o.createElement(W,{buttonProps:Object.assign(Object.assign({size:"small"},U(u)),r),actionFn:h,close:x,prefixCls:f("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},l??(y==null?void 0:y.okText))))};function ne(e){const{prefixCls:n,placement:r,className:t,style:a}=e,c=te(e,["prefixCls","placement","className","style"]),{getPrefixCls:s}=o.useContext(S),l=s("popconfirm",n),[u]=$(l);return u(o.createElement(M,{placement:r,className:w(l,t),style:a,content:o.createElement(k,Object.assign({prefixCls:l},c))}))}var oe=globalThis&&globalThis.__rest||function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(e);a<t.length;a++)n.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(e,t[a])&&(r[t[a]]=e[t[a]]);return r};const z=o.forwardRef((e,n)=>{const{getPrefixCls:r}=o.useContext(S),[t,a]=V(!1,{value:e.open,defaultValue:e.defaultOpen}),c=(i,d)=>{var C;a(i,!0),(C=e.onOpenChange)===null||C===void 0||C.call(e,i,d)},s=i=>{c(!1,i)},l=i=>{var d;return(d=e.onConfirm)===null||d===void 0?void 0:d.call(globalThis,i)},u=i=>{var d;c(!1,i),(d=e.onCancel)===null||d===void 0||d.call(globalThis,i)},g=i=>{i.keyCode===X.ESC&&t&&c(!1,i)},b=i=>{const{disabled:d=!1}=e;d||c(i)},{prefixCls:x,placement:h="top",trigger:m="click",okType:f="primary",icon:y=o.createElement(N,null),children:v,overlayClassName:B}=e,L=oe(e,["prefixCls","placement","trigger","okType","icon","children","overlayClassName"]),O=r("popconfirm",x),R=w(O,B),[D]=$(O);return D(o.createElement(A,Object.assign({},q(L,["title"]),{trigger:m,placement:h,onOpenChange:b,open:t,ref:n,overlayClassName:R,content:o.createElement(k,Object.assign({okType:f,icon:y},e,{prefixCls:O,close:s,onConfirm:l,onCancel:u})),"data-popover-inject":!0}),G(v,{onKeyDown:i=>{var d,C;o.isValidElement(v)&&((C=v==null?void 0:(d=v.props).onKeyDown)===null||C===void 0||C.call(d,i)),g(i)}})))});z._InternalPanelDoNotUseOrYouWillBeFired=ne;const ae=z,{Column:P}=_,le=(e,n)=>{const r=o.useRef(null),[t,a]=o.useState([]),[c,s]=o.useState(!1),[l,u]=o.useState(""),[g,b]=o.useState(!1);o.useImperativeHandle(n,()=>({showModal:(m=[],f)=>{s(!0),a(m),u(f)}}));const x=async m=>{try{await J({userpos:{user_id:l,posId:m.id}}),console.log(e),e.getList(),s(!1)}catch(f){console.log("Failed:",f)}};return j(Y,{forceRender:!0,title:"用户岗位设置",open:c,confirmLoading:g,onCancel:()=>{s(!1)},children:[p(I,{wrap:!0,children:p(E,{type:"primary",onClick:()=>{var m;return(m=r.current)==null?void 0:m.showModal()},className:"btn-pink",children:"新增"})}),j(_,{bordered:!0,dataSource:t,rowKey:m=>m.id,children:[p(P,{title:"岗位名称",dataIndex:"name"},"name"),p(P,{title:"岗位id",dataIndex:"id"},"id"),p(P,{title:"岗位描述",dataIndex:"description"},"description"),p(P,{title:"岗位状态",dataIndex:"status"},"status"),p(P,{title:"操作",render:(m,f)=>p(I,{children:p(ae,{title:"是否确定删除该岗位?",onConfirm:()=>x(f),okText:"确定",cancelText:"取消",children:p(E,{type:"primary",danger:!0,shape:"circle",icon:p(Z,{})})})})},"action")]}),p(Q,{ref:r,id:l})]})},fe=o.forwardRef(le);export{fe as default};
