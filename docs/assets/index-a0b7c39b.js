import{r as a,j as e,M as x,N as c,a0 as r,$ as b,az as E,ax as v}from"./index-893b5070.js";import{e as N,g as D}from"./menu-0bcc1d6d.js";import{P as I}from"./index-42ac211f.js";import{T as L,C as i}from"./Table-37fb6f07.js";import{T}from"./index-a3a6dd08.js";import{E as M}from"./EditOutlined-bd9f48f9.js";import{D as O}from"./DeleteOutlined-1d08d034.js";import"./PlusOutlined-2216b065.js";const A=()=>{console.log("Role 渲染");const[p,h]=a.useState([]),[j,y]=a.useState([]),[f,k]=a.useState([]),[d,l]=a.useState([]),[n,m]=a.useState([]),u=async()=>{const{data:s}=await E();h(s)},w=async()=>{const{data:s}=await v();y(s)},C=(s,t)=>{k(t.halfCheckedKeys),l(s)},g=async()=>{await N({id:n[0],menu:[...d,...f]})},K=async()=>{const{data:s}=await D(n[0]),t=[];s.forEach(o=>{if(o.children)return t.push(...o.children.map(S=>S.id));t.push(o.id)}),l(t)};a.useEffect(()=>{u(),w()},[]),a.useEffect(()=>{n.length&&K()},[n]);const R="在这里，你可以对系统中的用户进行管理，例如添加一个新用户，或者修改系统中已经存在的用户。";return e.jsx(I,{title:"角色管理",source:R,children:e.jsxs("div",{className:"app-card role",children:[e.jsxs("div",{className:"role-info",children:[e.jsxs(x,{justify:"space-between",align:"middle",children:[e.jsx(c,{children:"角色列表"}),e.jsx(c,{children:e.jsx(r,{type:"primary",onClick:u,children:"查询"})})]}),e.jsxs(L,{bordered:!0,dataSource:p,rowSelection:{type:"radio",selectedRowKeys:n,onChange:(s,t)=>m([t[0].id])},onRow:s=>({onClick:()=>{m([s.id])}}),rowKey:s=>s.id,children:[e.jsx(i,{title:"角色名称",dataIndex:"name"},"name"),e.jsx(i,{title:"角色代码",dataIndex:"code"},"code"),e.jsx(i,{title:"角色等级",dataIndex:"level"},"level"),e.jsx(i,{title:"角色描述",dataIndex:"description"},"description"),e.jsx(i,{title:"操作",render:(s,t)=>e.jsxs(b,{children:[e.jsx(r,{type:"primary",shape:"circle",icon:e.jsx(M,{})}),e.jsx(r,{type:"primary",danger:!0,shape:"circle",icon:e.jsx(O,{})})]})},"action")]})]}),e.jsxs("div",{className:"role-menu",children:[e.jsxs(x,{justify:"space-between",align:"middle",children:[e.jsx(c,{children:"角色列表"}),e.jsxs(c,{children:[" ",e.jsx(r,{type:"primary",disabled:!n[0],onClick:g,children:"保存"})]})]}),e.jsx(T,{checkable:!0,blockNode:!0,fieldNames:{title:"name",key:"id"},onCheck:C,selectedKeys:[1,2,3],checkedKeys:d,treeData:j})]})]})})};export{A as default};
//# sourceMappingURL=index-a0b7c39b.js.map
