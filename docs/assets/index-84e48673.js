import{G as v,r as n,j as e,d as r,H as l,J as m,T as y}from"./index-d3ab1968.js";import{P as f}from"./index-54f156aa.js";import"./PlusOutlined-932f5f5f.js";function x(s){return v({url:`/logs/list?type=${s}`,method:"get"})}const b=()=>{const[s,i]=n.useState("access"),[u,d]=n.useState([]),[g,c]=n.useState(""),p=async t=>{c("");const a=new EventSource("api/logs/detail?name=access.202306.log");return a.onmessage=o=>{c(s+o.data.replace(/\n/g,"<br />"))},()=>{a.close()}},h=async t=>{i(t.target.value)};return n.useEffect(()=>{(async()=>{const{data:t}=await x(s),a=t.map(o=>({value:o,label:o}));d(a)})()},[s]),e(f,{title:"日志信息",source:"日志信息",children:r("div",{className:"app-card logs",style:{height:"100%"},children:[r("div",{className:"logs-header",children:[r(l.Group,{value:s,onChange:h,children:[e(l.Button,{value:"access",children:"成功"}),e(l.Button,{value:"errors",children:"失败"}),e(l.Button,{value:"app-out",children:"app"})]}),e(m,{onChange:p,style:{width:240},options:u})]}),e("div",{className:"logs-body",children:e(y,{rows:4,value:g})})]})})};export{b as default};
