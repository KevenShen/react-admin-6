import{O as x,r as n,j as e,P as r,S as j,T as m}from"./index-893b5070.js";import{P as S}from"./index-42ac211f.js";import"./PlusOutlined-2216b065.js";function y(s){return x({url:`/logs/list?type=${s}`,method:"get"})}const L=()=>{const[s,u]=n.useState("access"),[d,c]=n.useState([]),[p,l]=n.useState(""),[g,i]=n.useState(null),h=async t=>{i(t),l("");const a=new EventSource(`api/logs/detail?name=${t}`);return a.onmessage=o=>{l(s+o.data.replace(/\n/g,"<br />"))},a.onerror=o=>{a.close(),l("文件不存在")},()=>{a.close()}},v=async t=>{l(""),c([]),i(null),u(t.target.value)};return n.useEffect(()=>{(async()=>{const{data:t}=await y(s),a=t.map(o=>({value:o,label:o}));c(a)})()},[s]),e.jsx(S,{title:"日志信息",source:"日志信息",children:e.jsxs("div",{className:"app-card logs",style:{height:"100%"},children:[e.jsxs("div",{className:"logs-header",children:[e.jsxs(r.Group,{value:s,onChange:v,children:[e.jsx(r.Button,{value:"access",children:"成功"}),e.jsx(r.Button,{value:"error",children:"失败"}),e.jsx(r.Button,{value:"app",children:"app"})]}),e.jsx(j,{onChange:h,style:{width:240},value:g,options:d})]}),e.jsx("div",{className:"logs-body",children:e.jsx(m,{rows:4,value:p})})]})})};export{L as default};
//# sourceMappingURL=index-a6a9b37f.js.map
