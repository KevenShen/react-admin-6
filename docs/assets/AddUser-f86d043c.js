import{r as e,ag as o,j as s,ah as g,d as C,I}from"./index-ff970420.js";import{b as x}from"./user-c8860824.js";import{A as S}from"./index-b94ae9b3.js";import"./request-7bfa538c.js";import"./axios-21b846bc.js";function V(l,u,n){const[a,d]=e.useState(l);return e.useEffect(()=>{const c=setTimeout(()=>{d(l)},u);return()=>{clearTimeout(c)}},[l,u]),e.useEffect(()=>{a&&n(a)},[a]),a}const k=(l,u)=>{const[n]=o.useForm(),[a,d]=e.useState(""),[c,m]=e.useState([]),[p,i]=e.useState(!1),[f,w]=e.useState(!1);e.useImperativeHandle(u,()=>({showModal:r=>{i(!0)}}));const h=async()=>{};V(a,1e3,async()=>{const{data:r}=await x({name:a});m(r.map(t=>({label:t.username,value:t.username,id:t.id})))});const b=(r,t)=>{d(t.label),n.setFieldValue("userId",t.id),console.log(n.getFieldsValue(),t.id)};return s(g,{forceRender:!0,title:"新增用户岗位",open:p,onOk:h,confirmLoading:f,onCancel:()=>{i(!1)},children:C(o,{form:n,style:{padding:"10px 60px 10px 0"},labelCol:{span:6},name:"basic",initialValues:{remember:!0},autoComplete:"off",children:[s(o.Item,{label:"选择用户",name:"username",rules:[{required:!0,message:"Please input your username!"}],children:s(S,{options:c,onSelect:b,onSearch:r=>d(r),placeholder:"input here"})}),s(o.Item,{name:"userId",hidden:!0}),s(o.Item,{label:"用户昵称",name:"nickname",rules:[{required:!0,message:"Please input your nickname!"}],children:s(I,{autoComplete:"off"})})]})})},L=e.forwardRef(k);export{L as default};
