import{r as s,av as t,j as o,aw as C}from"./index-893b5070.js";import{p as j}from"./menu-0bcc1d6d.js";import{c as b}from"./user-e3f0082f.js";import{A as w}from"./index-fc984a4e.js";const y=(d,i)=>{const[n]=t.useForm(),[S,r]=s.useState(""),[u,c]=s.useState([]),[p,l]=s.useState(!1),[m,v]=s.useState(!1);s.useImperativeHandle(i,()=>({showModal:e=>{l(!0)}}));const f=async()=>{try{const e=await b({userpos:{user_id:d.id,posId:n.getFieldsValue().posid}})}catch(e){console.log("Failed:",e)}},x=async()=>{const{data:e}=await j();c(e.map(a=>({label:a.name,value:a.name,id:a.id})))};s.useEffect(()=>{x()},[]);const h=(e,a)=>{r(a.label),n.setFieldValue("posid",a.id)},g=()=>{l(!1)};return o.jsx(C,{title:"新增用户岗位",open:p,onOk:f,destroyOnClose:!0,getContainer:!1,confirmLoading:m,onCancel:g,children:o.jsxs(t,{form:n,style:{padding:"10px 60px 10px 0"},labelCol:{span:6},name:"basic",initialValues:{remember:!0},autoComplete:"off",children:[o.jsx(t.Item,{label:"选择岗位",name:"username",rules:[{required:!0,message:"Please input your username!"}],children:o.jsx(w,{options:u,onSelect:h,onSearch:e=>r(e),placeholder:"input here"})}),o.jsx(t.Item,{name:"posid",hidden:!0})]})})},P=s.forwardRef(y);export{P as default};
//# sourceMappingURL=AddPos-b6b4b163.js.map
