{"version":3,"file":"editPos-3c6022b1.js","sources":["../../src/views/User/Pos/editPos.tsx"],"sourcesContent":["import { getMenu, getMenuById } from '@/api/login'\nimport { Form, Modal, Tree } from 'antd'\nimport { forwardRef, memo, useEffect, useImperativeHandle, useState } from 'react'\nconst filtermenuId = (arr) => {\n  return arr.map((item) => item.id)\n}\nconst EditPos = (props, ref) => {\n  // console.log('编辑弹窗刷新')\n  const [form] = Form.useForm()\n  const [open, setOpen] = useState(false)\n  const [treeData, settreeData] = useState([])\n  const [checkedKeys, setCheckedKeys] = useState<React.Key[]>([])\n  const [confirmLoading, setConfirmLoading] = useState(false)\n  useImperativeHandle(ref, () => ({\n    // changeVal 就是暴露给父组件的方法\n    showModal: (id) => {\n      getMenuId(id)\n      setOpen(true)\n    }\n  }))\n  const getmenyList = async () => {\n    const { data } = await getMenu()\n    settreeData(data)\n  }\n  // 根据岗位id获取菜单\n  const getMenuId = async (id) => {\n    const { data: menu } = await getMenuById(id)\n\n    settreeData(menu)\n  }\n\n  // 挂载时运行一次 获取所有菜单\n  useEffect(() => {\n    getmenyList()\n  }, [])\n\n  // 弹窗按钮提交表单\n  const handleOk = async () => {}\n  // 弹窗关闭\n  const handleCancel = () => {\n    form.resetFields()\n  }\n  const onCheck = () => {}\n\n  return (\n    <Modal\n      title=\"编辑\"\n      open={open}\n      onOk={handleOk}\n      getContainer={false}\n      confirmLoading={confirmLoading}\n      destroyOnClose\n      onCancel={handleCancel}>\n      <Tree\n        checkable\n        blockNode\n        fieldNames={{ title: 'name', key: 'id' }}\n        onCheck={onCheck}\n        checkedKeys={checkedKeys}\n        treeData={treeData}\n      />\n    </Modal>\n  )\n}\n\nexport default memo(forwardRef(EditPos)) // 必须使用forwardRef包裹组件才能暴露方法\n"],"names":["EditPos","props","ref","form","Form","open","setOpen","useState","treeData","settreeData","checkedKeys","setCheckedKeys","confirmLoading","setConfirmLoading","useImperativeHandle","id","getMenuId","getmenyList","data","getMenu","menu","getMenuById","useEffect","handleOk","handleCancel","onCheck","jsx","Modal","Tree","EditPos$1","memo","forwardRef"],"mappings":"uHAMA,MAAMA,EAAU,CAACC,EAAOC,IAAQ,CAE9B,KAAM,CAACC,CAAI,EAAIC,EAAK,QAAQ,EACtB,CAACC,EAAMC,CAAO,EAAIC,WAAS,EAAK,EAChC,CAACC,EAAUC,CAAW,EAAIF,EAAA,SAAS,CAAE,CAAA,EACrC,CAACG,EAAaC,CAAc,EAAIJ,EAAA,SAAsB,CAAE,CAAA,EACxD,CAACK,EAAgBC,CAAiB,EAAIN,WAAS,EAAK,EAC1DO,EAAA,oBAAoBZ,EAAK,KAAO,CAE9B,UAAYa,GAAO,CACjBC,EAAUD,CAAE,EACZT,EAAQ,EAAI,CACd,CACA,EAAA,EACF,MAAMW,EAAc,SAAY,CAC9B,KAAM,CAAE,KAAAC,CAAA,EAAS,MAAMC,IACvBV,EAAYS,CAAI,CAAA,EAGZF,EAAY,MAAOD,GAAO,CAC9B,KAAM,CAAE,KAAMK,CAAA,EAAS,MAAMC,EAAYN,CAAE,EAE3CN,EAAYW,CAAI,CAAA,EAIlBE,EAAAA,UAAU,IAAM,CACFL,GACd,EAAG,CAAE,CAAA,EAGL,MAAMM,EAAW,SAAY,CAAA,EAEvBC,EAAe,IAAM,CACzBrB,EAAK,YAAY,CAAA,EAEbsB,EAAU,IAAM,CAAA,EAGpB,OAAAC,EAAA,IAACC,EAAA,CACC,MAAM,KACN,KAAAtB,EACA,KAAMkB,EACN,aAAc,GACd,eAAAX,EACA,eAAc,GACd,SAAUY,EACV,SAAAE,EAAA,IAACE,EAAA,CACC,UAAS,GACT,UAAS,GACT,WAAY,CAAE,MAAO,OAAQ,IAAK,IAAK,EACvC,QAAAH,EACA,YAAAf,EACA,SAAAF,CAAA,CACF,CAAA,CAAA,CAGN,EAEAqB,EAAeC,OAAKC,EAAAA,WAAW/B,CAAO,CAAC"}