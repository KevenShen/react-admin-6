import{r as e,ai as M,am as g,j as r,aj as C,al as E}from"./index-d3ab1968.js";import{a as w}from"./menu-300e0c56.js";import{T as I}from"./index-119e3193.js";const S=(x,l)=>{console.log("编辑弹窗刷新"),M.useForm();const[u,a]=e.useState(!1),[c,i]=e.useState(),[f,m]=e.useState([]),[d,s]=e.useState([]),[h,O]=e.useState(!1);e.useImperativeHandle(l,()=>({showModal:t=>{i(t),k(),a(!0)}}));const p=async()=>{const{data:t}=await E();m(t)},k=async()=>{const{data:t}=await g(c),n=[];t.forEach(o=>{n.push(o.id),o.children&&n.push(...o.children.map(y=>y.id))}),s(n)};return e.useEffect(()=>{p()},[]),r(C,{forceRender:!0,title:"编辑",open:u,onOk:async()=>{await w({menu:d,id:c}),a(!1)},confirmLoading:h,onCancel:()=>{a(!1),s([])},children:r(I,{checkable:!0,blockNode:!0,fieldNames:{title:"name",key:"id"},onCheck:t=>{s(t)},defaultExpandAll:!0,checkedKeys:d,treeData:f})})},N=e.memo(e.forwardRef(S));export{N as default};
