import{r as e,av as S,ay as I,j as d,aw as K,ax as j}from"./index-893b5070.js";import{a as O}from"./menu-0bcc1d6d.js";import{T as L}from"./index-a3a6dd08.js";const b=(v,u)=>{S.useForm();const[l,s]=e.useState(!1),[i,f]=e.useState(),[h,m]=e.useState([]),[p,y]=e.useState([]),[r,a]=e.useState([]),[k,D]=e.useState(!1);e.useImperativeHandle(u,()=>({showModal:t=>{f(t),x(t),s(!0)}}));const C=async()=>{const{data:t}=await j();y(t)},x=async t=>{const{data:n}=await I(t),o=[];n.forEach(c=>{if(c.children)return o.push(...c.children.map(w=>w.id));o.push(c.id)}),a(o)};e.useEffect(()=>{C()},[]);const E=async()=>{await O({menu:[...r,...h],id:i}),s(!1)},M=()=>{s(!1),a([])},g=(t,n)=>{m(n.halfCheckedKeys),a(t)};return d.jsx(K,{title:"编辑",open:l,onOk:E,getContainer:!1,confirmLoading:k,destroyOnClose:!0,onCancel:M,children:d.jsx(L,{checkable:!0,blockNode:!0,fieldNames:{title:"name",key:"id"},onCheck:g,defaultExpandAll:!0,checkedKeys:r,treeData:p})})},R=e.forwardRef(b);export{R as default};
//# sourceMappingURL=editMenu-3cb557f5.js.map
