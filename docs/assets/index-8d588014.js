import{r as i,j as e,d as s,ai as h,aj as o,J as c,H as j}from"./index-2dc9f0ca.js";import{P as v}from"./index-0183c3d6.js";import{b as E,g as N}from"./login-b3d8a543.js";import{T as D,C as r}from"./Table-b5756ebb.js";import{e as I,g as L}from"./menu-9f8157b2.js";import{T}from"./index-cf7bbb35.js";import{E as H}from"./EditOutlined-4b535220.js";import{D as O}from"./DeleteOutlined-21a04bf0.js";import"./PlusOutlined-062043c8.js";import"./request-a759f595.js";import"./axios-21b846bc.js";const U=()=>{console.log("Role 渲染");const[y,f]=i.useState([]),[C,g]=i.useState([]),[k,w]=i.useState([]),[l,m]=i.useState([]),[n,p]=i.useState([]),u=async()=>{const{data:t}=await E();f(t)},x=async()=>{const{data:t}=await N();g(t)},b=(t,a)=>{w(a.halfCheckedKeys),m(t)},K=async()=>{await I({id:n[0],menu:[...l,...k]})},S=async()=>{const{data:t}=await L(n[0]),a=[];t.forEach(d=>{if(d.children)return a.push(...d.children.map(R=>R.id));a.push(d.id)}),m(a)};return i.useEffect(()=>{u(),x()},[]),i.useEffect(()=>{n.length&&S()},[n]),e(v,{title:"角色管理",source:"在这里，你可以对系统中的用户进行管理，例如添加一个新用户，或者修改系统中已经存在的用户。",children:s("div",{className:"app-card role",children:[s("div",{className:"role-info",children:[s(h,{justify:"space-between",align:"middle",children:[e(o,{children:"角色列表"}),e(o,{children:e(c,{type:"primary",onClick:u,children:"查询"})})]}),s(D,{bordered:!0,dataSource:y,rowSelection:{type:"radio",selectedRowKeys:n,onChange:(t,a)=>p([a[0].id])},onRow:t=>({onClick:()=>{p([t.id])}}),rowKey:t=>t.id,children:[e(r,{title:"角色名称",dataIndex:"name"},"name"),e(r,{title:"角色代码",dataIndex:"code"},"code"),e(r,{title:"角色等级",dataIndex:"level"},"level"),e(r,{title:"角色描述",dataIndex:"description"},"description"),e(r,{title:"操作",render:(t,a)=>s(j,{children:[e(c,{type:"primary",shape:"circle",icon:e(H,{})}),e(c,{type:"primary",danger:!0,shape:"circle",icon:e(O,{})})]})},"action")]})]}),s("div",{className:"role-menu",children:[s(h,{justify:"space-between",align:"middle",children:[e(o,{children:"角色列表"}),s(o,{children:[" ",e(c,{type:"primary",disabled:!n[0],onClick:K,children:"保存"})]})]}),e(T,{checkable:!0,blockNode:!0,fieldNames:{title:"name",key:"id"},onCheck:b,selectedKeys:[1,2,3],checkedKeys:l,treeData:C})]})]})})};export{U as default};
