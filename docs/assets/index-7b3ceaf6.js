import{G as S,r as n,j as e,d as c,H as r,J as y,T as f}from"./index-882de5fd.js";import{P as x}from"./index-0572c5fd.js";import"./PlusOutlined-ae187890.js";function w(t){return S({url:`/logs/list?type=${t}`,method:"get"})}const B=()=>{const[t,d]=n.useState("access"),[g,i]=n.useState([]),[p,l]=n.useState(""),[h,u]=n.useState(null),v=async s=>{u(s),l("");const a=new EventSource(`api/logs/detail?name=${s}`);return a.onmessage=o=>{l(t+o.data.replace(/\n/g,"<br />"))},a.onerror=o=>{a.close(),l("文件不存在")},()=>{a.close()}},m=async s=>{l(""),i([]),u(null),d(s.target.value)};return n.useEffect(()=>{(async()=>{const{data:s}=await w(t),a=s.map(o=>({value:o,label:o}));i(a)})()},[t]),e(x,{title:"日志信息",source:"日志信息",children:c("div",{className:"app-card logs",style:{height:"100%"},children:[c("div",{className:"logs-header",children:[c(r.Group,{value:t,onChange:m,children:[e(r.Button,{value:"access",children:"成功"}),e(r.Button,{value:"error",children:"失败"}),e(r.Button,{value:"app",children:"app"})]}),e(y,{onChange:v,style:{width:240},value:h,options:g})]}),e("div",{className:"logs-body",children:e(f,{rows:4,value:p})})]})})};export{B as default};
