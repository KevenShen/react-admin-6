{"version":3,"file":"index-3f7dbf04.js","sources":["../../src/views/User/Pos/index.tsx"],"sourcesContent":["import Panl from '@/components/TypingCard'\nimport { getRole, getMenu } from '@/api/login'\nimport { Button, Col, Row, Space, Table, Tree } from 'antd'\nimport Column from 'antd/es/table/Column'\nimport { useEffect, useRef, useState } from 'react'\nimport { EditOutlined, DeleteOutlined } from '@ant-design/icons'\nimport './index.less'\nimport { editmenu, getmenu, posAll } from '@/api/menu'\nimport EditMenu from './editMenu'\nimport EditPos from './editPos'\nconst Role = () => {\n  console.log('岗位 渲染')\n  const from = useRef(null)\n  const editPos = useRef(null) // 编辑与新增岗位\n  const [list, setList] = useState([])\n  const getList = async () => {\n    const { data } = await posAll()\n    setList(data)\n  }\n  // 挂载时运行一次\n  useEffect(() => {\n    getList()\n  }, [])\n  const cardContent =\n    '在这里，你可以对系统中的岗位进行管理，岗位对应一个角色,默认拥有角色对应菜单,管理员可以根据岗位定制化菜单(只会修改岗位,不会修改角色对应菜单)。'\n  return (\n    <Panl title=\"岗位管理\" source={cardContent}>\n      <div className=\"app-card pos\">\n        <Space wrap>\n          <Button type=\"primary\" onClick={getList}>\n            查询\n          </Button>\n          {/* <Button type=\"primary\" onClick={() => from?.current.showModal()} className=\"btn-pink\">\n            新增\n          </Button> */}\n        </Space>\n        <Table bordered dataSource={list} rowKey={(record) => record.id}>\n          <Column title=\"岗位名称\" dataIndex=\"name\" key=\"name\" />\n          <Column title=\"岗位代码\" dataIndex=\"id\" key=\"id\" />\n          <Column title=\"岗位类型\" dataIndex=\"role_id\" key=\"role_id\" />\n          <Column title=\"机构ID\" dataIndex=\"org_id\" key=\"org_id\" />\n          <Column title=\"岗位描述\" dataIndex=\"description\" key=\"description\" />\n          <Column\n            title=\"角色类型\"\n            dataIndex=\"role\"\n            key=\"role.name\"\n            render={(role) =>\n              /* 确保 role 是一个对象并且有 name 属性 */\n              typeof role === 'object' && role !== null && 'name' in role ? role.name : '未知'\n            }\n          />\n          <Column\n            title=\"操作\"\n            key=\"action\"\n            render={(_: any, record: any) => (\n              <Space>\n                <Button\n                  type=\"primary\"\n                  onClick={() => from?.current.showModal(record.id)}\n                  shape=\"circle\"\n                  icon={<EditOutlined />}\n                />\n                <Button type=\"primary\" danger shape=\"circle\" icon={<DeleteOutlined />} />\n              </Space>\n            )}\n          />\n        </Table>\n      </div>\n      <EditMenu ref={from} getList={getList}></EditMenu>\n      <EditPos ref={editPos}></EditPos>\n    </Panl>\n  )\n}\n\nexport default Role\n"],"names":["Role","from","useRef","editPos","list","setList","useState","getList","data","posAll","useEffect","jsxs","Panl","jsx","Space","Button","Table","record","Column","role","_","EditOutlined","DeleteOutlined","EditMenu","EditPos"],"mappings":"4aAUA,MAAMA,EAAO,IAAM,CACjB,QAAQ,IAAI,OAAO,EACb,MAAAC,EAAOC,SAAO,IAAI,EAClBC,EAAUD,SAAO,IAAI,EACrB,CAACE,EAAMC,CAAO,EAAIC,EAAA,SAAS,CAAE,CAAA,EAC7BC,EAAU,SAAY,CAC1B,KAAM,CAAE,KAAAC,CAAA,EAAS,MAAMC,IACvBJ,EAAQG,CAAI,CAAA,EAGdE,OAAAA,EAAAA,UAAU,IAAM,CACNH,GACV,EAAG,CAAE,CAAA,EAIFI,EAAAC,EAAA,CAAK,MAAM,OAAO,OAFnB,4EAGE,SAAA,CAACD,EAAA,MAAA,CAAI,UAAU,eACb,SAAA,CAACE,EAAAC,EAAA,CAAM,KAAI,GACT,SAACD,EAAAE,EAAA,CAAO,KAAK,UAAU,QAASR,EAAS,SAAA,IAEzC,CAAA,EAIF,EACAI,EAACK,EAAM,CAAA,SAAQ,GAAC,WAAYZ,EAAM,OAASa,GAAWA,EAAO,GAC3D,SAAA,CAAAJ,EAACK,EAAO,CAAA,MAAM,OAAO,UAAU,QAAW,MAAO,IAChDA,EAAO,CAAA,MAAM,OAAO,UAAU,MAAS,IAAK,IAC5CA,EAAO,CAAA,MAAM,OAAO,UAAU,WAAc,SAAU,IACtDA,EAAO,CAAA,MAAM,OAAO,UAAU,UAAa,QAAS,IACpDA,EAAO,CAAA,MAAM,OAAO,UAAU,eAAkB,aAAc,EAC/DL,EAACK,EAAA,CACC,MAAM,OACN,UAAU,OAEV,OAASC,GAEP,OAAOA,GAAS,UAAYA,IAAS,MAAQ,SAAUA,EAAOA,EAAK,KAAO,IAAA,EAHxE,WAKN,EACAN,EAACK,EAAA,CACC,MAAM,KAEN,OAAQ,CAACE,EAAQH,MACdH,EACC,CAAA,SAAA,CAAAD,EAACE,EAAA,CACC,KAAK,UACL,QAAS,IAAMd,GAAA,YAAAA,EAAM,QAAQ,UAAUgB,EAAO,IAC9C,MAAM,SACN,OAAOI,EAAa,EAAA,CAAA,CACtB,EACAR,EAACE,EAAO,CAAA,KAAK,UAAU,OAAM,GAAC,MAAM,SAAS,KAAOF,EAAAS,EAAA,CAAA,CAAe,CAAI,CAAA,CAAA,EACzE,CAAA,EAVE,QAYN,CAAA,EACF,CAAA,EACF,EACCT,EAAAU,EAAA,CAAS,IAAKtB,EAAM,QAAAM,CAAkB,CAAA,EACvCM,EAACW,EAAQ,CAAA,IAAKrB,CAAS,CAAA,CACzB,CAAA,CAAA,CAEJ"}