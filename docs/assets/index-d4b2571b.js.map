{"version":3,"file":"index-d4b2571b.js","sources":["../../src/views/User/Manage/index.tsx"],"sourcesContent":["import { getUserList } from '@/api/user'\nimport { Panl } from '@/components'\nimport { DeleteOutlined, EditOutlined } from '@ant-design/icons'\nimport { Button, Space, Table, TablePaginationConfig } from 'antd'\nimport { useEffect, useRef, useState } from 'react'\nimport Edituser from './editUser'\nconst { Column } = Table\nconst cardContent =\n  '在这里，你可以对系统中的用户进行管理，例如添加一个新用户，或者修改系统中已经存在的用户。'\nconst Manage = () => {\n  console.log('Manage 渲染')\n\n  const from = useRef(null)\n  const [list, setList] = useState([])\n  const [row, setRow] = useState({})\n  const [pagination, setPagination] = useState<TablePaginationConfig>({\n    current: 1,\n    pageSize: 10\n  })\n  const getList = async (page: TablePaginationConfig = pagination) => {\n    setPagination(page)\n    const { data } = await getUserList({\n      param: {},\n      pageInfo: {\n        pageNum: page.current,\n        pageSize: page.pageSize\n      }\n    })\n    setList(data)\n  }\n  // 修改\n  const edit = async (row) => {\n    from?.current.showModal(row)\n  }\n\n  const imgacc = (acc) => {\n    if (!acc) return ''\n    if (acc.includes('http')) return acc\n    return 'http://' + window.document.location.host + '/api' + acc\n  }\n  // 挂载时运行一次\n  useEffect(() => {\n    getList(pagination)\n  }, [])\n  return (\n    <Panl title=\"用户管理\" source={cardContent}>\n      <div className=\"app-card\">\n        {' '}\n        <Space wrap>\n          <Button type=\"primary\" onClick={() => getList()}>\n            查询\n          </Button>\n          <Button type=\"primary\" onClick={() => from?.current.showModal()} className=\"btn-pink\">\n            新增\n          </Button>\n        </Space>\n        <Table\n          bordered\n          dataSource={list}\n          onChange={getList}\n          pagination={{\n            ...pagination,\n            pageSizeOptions: [5, 10],\n            showTotal: (total) => `共 ${total} 条`,\n            showSizeChanger: true\n          }}\n          rowKey={(record) => record.id}>\n          <Column title=\"用户名称\" dataIndex=\"username\" key=\"username\" />\n          <Column title=\"用户昵称\" dataIndex=\"nickname\" key=\"nickname\" />\n          <Column\n            title=\"头像\"\n            dataIndex=\"avatar\"\n            key=\"avatar\"\n            render={(_: any, record) => (\n              <img\n                style={{ width: '64px', height: '64px' }}\n                src={imgacc(record.avatar)}\n                alt=\"avatar\"\n              />\n            )}\n          />\n          {/* <Column\n          title=\"角色\"\n          dataIndex=\"role\"\n          key=\"role\"\n          render={(role: string[]) => (\n            <>\n              {role.map((tag) => (\n                <Tag color=\"blue\" key={tag}>\n                  {tag}\n                </Tag>\n              ))}\n            </>\n          )}\n        /> */}\n          <Column\n            title=\"操作\"\n            key=\"action\"\n            render={(_: any, record: DataType) => (\n              <Space>\n                <Button\n                  type=\"primary\"\n                  shape=\"circle\"\n                  onClick={() => edit(record)}\n                  icon={<EditOutlined />}\n                />\n                <Button type=\"primary\" danger shape=\"circle\" icon={<DeleteOutlined />} />\n              </Space>\n            )}\n          />\n        </Table>\n        <Edituser ref={from} getList={() => getList()}></Edituser>\n      </div>\n    </Panl>\n  )\n}\n\nexport default Manage\n"],"names":["Column","Table","cardContent","Manage","from","useRef","list","setList","useState","pagination","setPagination","getList","page","data","getUserList","edit","row","imgacc","acc","useEffect","jsx","Panl","jsxs","Space","Button","total","record","_","EditOutlined","DeleteOutlined","Edituser"],"mappings":"qXAMA,KAAM,CAAE,OAAAA,CAAW,EAAAC,EACbC,EACJ,+CACIC,EAAS,IAAM,CACnB,QAAQ,IAAI,WAAW,EAEjB,MAAAC,EAAOC,SAAO,IAAI,EAClB,CAACC,EAAMC,CAAO,EAAIC,EAAA,SAAS,CAAE,CAAA,EACbA,EAAAA,SAAS,CAAA,CAAE,EACjC,KAAM,CAACC,EAAYC,CAAa,EAAIF,WAAgC,CAClE,QAAS,EACT,SAAU,EAAA,CACX,EACKG,EAAU,MAAOC,EAA8BH,IAAe,CAClEC,EAAcE,CAAI,EAClB,KAAM,CAAE,KAAAC,GAAS,MAAMC,EAAY,CACjC,MAAO,CAAC,EACR,SAAU,CACR,QAASF,EAAK,QACd,SAAUA,EAAK,QACjB,CAAA,CACD,EACDL,EAAQM,CAAI,CAAA,EAGRE,EAAO,MAAOC,GAAQ,CACpBZ,GAAA,MAAAA,EAAA,QAAQ,UAAUY,EAAG,EAGvBC,EAAUC,GACTA,EACDA,EAAI,SAAS,MAAM,EAAUA,EAC1B,UAAY,OAAO,SAAS,SAAS,KAAO,OAASA,EAF3C,GAKnBC,OAAAA,EAAAA,UAAU,IAAM,CACdR,EAAQF,CAAU,CACpB,EAAG,CAAE,CAAA,EAEHW,EAAA,IAACC,GAAK,MAAM,OAAO,OAAQnB,EACzB,SAAAoB,EAAA,KAAC,MAAI,CAAA,UAAU,WACZ,SAAA,CAAA,IACDA,EAAAA,KAACC,EAAM,CAAA,KAAI,GACT,SAAA,CAAAH,MAACI,GAAO,KAAK,UAAU,QAAS,IAAMb,IAAW,SAEjD,KAAA,EACCS,EAAAA,IAAAI,EAAA,CAAO,KAAK,UAAU,QAAS,IAAMpB,GAAA,YAAAA,EAAM,QAAQ,YAAa,UAAU,WAAW,SAEtF,IAAA,CAAA,CAAA,EACF,EACAkB,EAAA,KAACrB,EAAA,CACC,SAAQ,GACR,WAAYK,EACZ,SAAUK,EACV,WAAY,CACV,GAAGF,EACH,gBAAiB,CAAC,EAAG,EAAE,EACvB,UAAYgB,GAAU,KAAKA,CAAK,KAChC,gBAAiB,EACnB,EACA,OAASC,GAAWA,EAAO,GAC3B,SAAA,CAAAN,EAAA,IAACpB,EAAO,CAAA,MAAM,OAAO,UAAU,YAAe,UAAW,QACxDA,EAAO,CAAA,MAAM,OAAO,UAAU,YAAe,UAAW,EACzDoB,EAAA,IAACpB,EAAA,CACC,MAAM,KACN,UAAU,SAEV,OAAQ,CAAC2B,EAAQD,IACfN,EAAA,IAAC,MAAA,CACC,MAAO,CAAE,MAAO,OAAQ,OAAQ,MAAO,EACvC,IAAKH,EAAOS,EAAO,MAAM,EACzB,IAAI,QAAA,CACN,CAAA,EANE,QAQN,EAeAN,EAAA,IAACpB,EAAA,CACC,MAAM,KAEN,OAAQ,CAAC2B,EAAQD,WACdH,EACC,CAAA,SAAA,CAAAH,EAAA,IAACI,EAAA,CACC,KAAK,UACL,MAAM,SACN,QAAS,IAAMT,EAAKW,CAAM,EAC1B,WAAOE,EAAa,EAAA,CAAA,CACtB,EACAR,EAAAA,IAACI,EAAO,CAAA,KAAK,UAAU,OAAM,GAAC,MAAM,SAAS,KAAOJ,EAAAA,IAAAS,EAAA,CAAA,CAAe,CAAI,CAAA,CAAA,EACzE,CAAA,EAVE,QAYN,CAAA,CAAA,CACF,QACCC,EAAS,CAAA,IAAK1B,EAAM,QAAS,IAAMO,IAAW,CAAA,CACjD,CAAA,CACF,CAAA,CAEJ"}